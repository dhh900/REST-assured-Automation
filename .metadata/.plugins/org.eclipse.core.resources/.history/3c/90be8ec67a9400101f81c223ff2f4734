package tests; 
import static io.restassured.RestAssured.given; 
import static io.restassured.matcher.RestAssuredMatchers.matchesXsdInClasspath; 
import static org.hamcrest.Matchers.anyOf; 
import static org.hamcrest.Matchers.equalTo; 
import static org.hamcrest.Matchers.is; 
import java.io.File; 
import java.io.FileInputStream; 
import java.io.IOException; 
import org.apache.commons.io.IOUtils; 
import org.testng.annotations.Test; 
import io.restassured.RestAssured; 
import io.restassured.http.ContentType; 
public class XMLSchemaValidation { 
@Test 
public void schemaValidation() throws IOException { 
File file = new File("./SoapRequest/Add.xml"); 
if (file.exists()) 
System.out.println(" >> File Exists"); 
FileInputStream fileInputStream = new FileInputStream(file); 
String requestBody = IOUtils.toString(fileInputStream, "UTF-8"); 
given()
    .baseUri("http://www.dneonline.com") // Local base URI
    .header("x-api-key", "") // Remove global API key if inherited
    .contentType("text/xml")
    .accept(ContentType.XML)
    .body(requestBody)
.when()
    .post("/calculator.asmx")
.then()
    .statusCode(anyOf(is(200), is(201)))
    .log().all()
    .and()
    .body("//*:AddResult.text()", equalTo("5"))
    .and()
    .assertThat()
    .body(matchesXsdInClasspath("CalculatorEnvelope.xsd")); 
} 
}